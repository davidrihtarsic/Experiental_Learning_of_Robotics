---
published: false
---

 ARDUINO PLATFORM
================================================================================

Arduino is a popular open-source platform used for developing electronic projects. The platform consists of hardware and software components, including microcontrollers, shields, sensors, and an integrated development environment (IDE).

The Arduino IDE is the software used to program and upload code to the microcontrollers. It is available for Windows, Mac, and Linux operating systems and is free to download. The IDE includes a text editor for writing code, a compiler that turns the code into machine language, and a bootloader that allows the code to be uploaded to the board.

There are different types of Arduino boards available, each with its unique features and capabilities. The most common boards include the Arduino Uno, which is widely used for beginners, and the Arduino Mega, which has more input and output pins. Other notable boards include the Arduino Nano, which is small and compact, and the Arduino Due, which has a more powerful processor.

Overall, the Arduino platform is versatile and easy to use, making it a popular choice for hobbyists, students, and professionals alike. Its open-source nature allows for a vast community of users to develop and share projects and resources, making it an excellent starting point for anyone interested in electronics and programming.


 

 Implementing control algorithms
--------------------------------------------------------------------------------


 

 Debugging and testing
--------------------------------------------------------------------------------


 
## Getting Started with the RobDuino Module in Early Robotics

Robotics is a fantastic way to introduce students to electronics, programming, and system design. The **RobDuino module** was developed specifically for early robotics education using the Arduino UNO. It simplifies connections between the microcontroller and common electronic components such as sensors, DC motors, and LCDs. This chapter explains the hardware features, provides step-by-step setup instructions, and offers sample projects and exercises to deepen your understanding.

---

### Introduction

The RobDuino module is designed to make it easier to connect sensors, actuators, and other components to an Arduino UNO. By integrating an H-bridge driver on the digital pins and providing accessible screw terminals, it allows for quick prototyping and experimentation. In this chapter, you will learn:

- **Key Hardware Features:** How the module’s pins are arranged and their specific functions.
- **Wiring Techniques:** How to correctly connect sensors, motors, and other devices.
- **Programming Basics:** How to use Arduino functions like `digitalWrite()`, `analogWrite()`, `digitalRead()`, and `analogRead()` with the module.
- **Sample Projects:** Practical examples such as blinking an LED and controlling a DC motor.
- **Self-Assessment:** Questions to test your understanding.

---

### Hardware Overview

Before diving into the projects, it is essential to understand the RobDuino module’s layout and functionality.

#### Digital Output Pins (D0–D7)
- **H-Bridge Driver:** Each digital pin (D0 to D7) is equipped with an H-bridge driver. These pins are intended to be used as **digital outputs only**.
- **Usage:** Use `digitalWrite(pin, HIGH)` or `digitalWrite(pin, LOW)` to set the voltage level.
- **PWM Capability:** On pins D6, D5, and D3, you can also use the `analogWrite(pin, value)` function to output a Pulse Width Modulated (PWM) signal. This is useful for controlling the speed of motors or the brightness of LEDs.

#### Analog and Digital Input Pins (A0–A5)
- **Versatile Use:** The analog pins can function as either digital or analog inputs.
- **Digital Read:** Use `digitalRead(pin)` to determine if the voltage is HIGH (+5V) or LOW (0V).
- **Analog Read:** Use `analogRead(pin)` to obtain the actual voltage level (a value between 0 and 1023).
- **Special Note:** Pins A4 and A5 are also equipped with jumpers connected to GND. This configuration can be beneficial for certain sensor setups and helps to stabilize the readings.

#### Power and Control Terminals
- **+5V and GND Terminals:** These screw terminals are used to power sensors and other modules.
- **Reset Button:** Resets the Arduino UNO, restarting the currently loaded program.
- **ENABLE Switch:** This switch can disable all outputs on pins D0–D7, which is especially useful for safely disconnecting actuators (e.g., DC motors) during testing or when not in use.

---

## Wiring and Setup

### Connecting the RobDuino Module
1. **Digital Connections:**  
   - Connect your output devices (LEDs, motors, etc.) to the screw terminals labeled D0–D7.
   - For PWM control, make sure your device is connected to D3, D5, or D6.

2. **Analog Connections:**  
   - Attach sensors (such as light sensors, potentiometers, etc.) to the screw terminals labeled A0–A5.
   - Remember: if using A4 or A5, the built-in jumper to GND might affect your circuit, so consult the sensor’s datasheet if necessary.

3. **Powering Devices:**  
   - Use the +5V and GND terminals on the RobDuino module to supply power to sensors or other low-voltage devices.

4. **Control Elements:**  
   - Familiarize yourself with the **Reset** button for restarting your program.
   - Use the **ENABLE** switch to disable outputs when you need to prevent accidental activation of actuators.

### Safety Tips
- **Double-check connections** before powering the system.
- **Use current-limiting resistors** when connecting LEDs to avoid damaging components.
- **Ensure proper grounding** to prevent erratic sensor readings.

---

## Programming Examples

Programming the RobDuino module is very similar to programming a standard Arduino UNO. Here are a few example sketches to illustrate its use.

### Example 1: Blinking an LED on a Digital Output Pin

```cpp
// Connect an LED (with a current-limiting resistor) to the D0 terminal.

void setup() {
  // Set digital pin 0 as an output
  pinMode(7, OUTPUT);
}

void loop() {
  digitalWrite(7, HIGH);   // Turn the LED on
  delay(1000);             // Wait for 1 second
  digitalWrite(7, LOW);    // Turn the LED off
  delay(1000);             // Wait for 1 second
}
```

### Example 2: Controlling LED Brightness with PWM

```cpp
// Connect an LED to the D6 terminal which supports PWM

void setup() {
  // Set digital pin 6 as an output
  pinMode(6, OUTPUT);
}

void loop() {
  // Increase brightness
  for (int brightness = 0; brightness <= 255; brightness++) {
    analogWrite(6, brightness);
    delay(10);
  }
  
  // Decrease brightness
  for (int brightness = 255; brightness >= 0; brightness--) {
    analogWrite(6, brightness);
    delay(10);
  }
}
```

### Example 3: Reading an Analog Sensor

```cpp
// Connect a potentiometer or any analog sensor to the A0 terminal

void setup() {
  Serial.begin(9600);  // Initialize serial communication for debugging
}

void loop() {
  int sensorValue = analogRead(A0);  // Read the analog value from sensor
  Serial.println(sensorValue);       // Print the sensor value to the Serial Monitor
  delay(500);                        // Wait half a second before the next reading
}
```

### Example 4: Controlling a DC Motor Using the H-Bridge

```cpp
// Assume the DC motor is connected via an H-bridge on digital pins D7 (direction) and D6 (PWM speed control)

void setup() {
  pinMode(7, OUTPUT); // Motor direction control
  pinMode(6, OUTPUT); // PWM speed control
}

void loop() {
  // Set motor direction to forward
  digitalWrite(7, HIGH);
  
  // Ramp up the motor speed
  for (int speed = 0; speed <= 255; speed++) {
    analogWrite(6, speed);
    delay(10);
  }
  
  // Run at full speed for 2 seconds
  delay(2000);
  
  // Ramp down the motor speed
  for (int speed = 255; speed >= 0; speed--) {
    analogWrite(6, speed);
    delay(10);
  }
  
  // Brief pause before reversing the motor
  delay(500);
  
  // Change motor direction to reverse
  digitalWrite(7, LOW);
  
  // Repeat the speed ramping for reverse motion
  for (int speed = 0; speed <= 255; speed++) {
    analogWrite(6, speed);
    delay(10);
  }
  
  delay(2000);
  
  for (int speed = 255; speed >= 0; speed--) {
    analogWrite(6, speed);
    delay(10);
  }
  
  delay(500);
}
```

---

## Sample Projects

### Project 1: LED Blinker
- **Objective:** Understand basic digital output.
- **Components:** LED, resistor, wires.
- **Procedure:** Connect the LED to terminal D0. Upload the blinking LED sketch (Example 1). Observe the LED turning on and off at one-second intervals.

### Project 2: Motor Speed Controller
- **Objective:** Learn how to control a motor’s speed and direction.
- **Components:** DC motor, H-bridge (integrated on the module), external power supply (if required), wires.
- **Procedure:** Connect the motor as indicated in Example 4. Experiment with changing the PWM values and delay times to observe variations in motor speed and behavior.

### Project 3: Analog Sensor Monitor
- **Objective:** Acquire and monitor analog sensor data.
- **Components:** Potentiometer or light sensor, wires.
- **Procedure:** Connect the sensor to terminal A0. Use Example 3 to read sensor values and view the data on the Serial Monitor.

---

## 1.6 Self-Assessment Questions

1. **Digital Outputs:**  
   - What is the primary function of the digital pins D0–D7 on the RobDuino module?  
   *(Hint: Consider their connection to the H-bridge drivers.)*

2. **PWM Capability:**  
   - Which digital pins support PWM, and why is PWM useful in robotics?  

3. **Analog Input:**  
   - How do you obtain a numerical value from an analog sensor connected to the RobDuino module?  
   *(Which function is used, and what is the typical range of values?)*
   
4. **Enable Switch:**  
   - What is the purpose of the ENABLE switch on the module, and how does it affect connected actuators?

5. **Ground Jumpers on Analog Pins:**  
   - Why might pins A4 and A5 have jumpers connected to GND, and how can this affect sensor operation?

---

## Chapter Summary

- **Module Overview:** The RobDuino module is a powerful tool designed for early robotics education, integrating an H-bridge on digital pins and providing accessible screw terminals.
- **Digital vs. Analog:** Digital pins (D0–D7) are intended as outputs (with PWM available on D3, D5, and D6), while analog pins (A0–A5) are versatile and can be used for digital or analog inputs.
- **Power and Control:** The module includes dedicated +5V and GND terminals, a reset button for rebooting the system, and an ENABLE switch for safely managing actuator outputs.
- **Programming:** Standard Arduino functions (`digitalWrite()`, `analogWrite()`, `digitalRead()`, and `analogRead()`) are used to interface with the module, making it accessible to beginners.
- **Practical Projects:** Through projects like LED blinking, motor control, and sensor monitoring, students can gain hands-on experience in electronics and robotics.

By mastering these basics, you lay a solid foundation for exploring more complex robotics projects in the future. Use the provided examples and self-assessment questions to test your knowledge and reinforce your learning.

Happy Robotics!



 Overview of the Arduino platform and its capabilities
--------------------------------------------------------------------------------

Arduino originated from the Wiring project, which was developed at the Interaction Design Institute Ivrea in Italy. The Wiring project was an open-source electronics prototyping platform that was designed to provide a low-cost and easy-to-use environment for creating interactive physical computing applications. The project was led by Hernando Barragán, a professor at the Institute, and the platform was based on the open-source, programmable Atmel microcontroller. Arduino was derived from the Wiring project and was released in 2005.

Arduino is an open source hardware and software platform used for building interactive electronics projects. The Arduino platform was designed to facilitate creating digital projects for the physical world. It consists of a physical programmable circuit board (often called a microcontroller) as well as a set of software tools for writing code for the board.

The Arduino platform is based on the Atmel AVR microcontroller, so it is capable of running programs written in C or C++. The board itself is made up of a number of components, including a voltage regulator, a USB connection, an LED, and a set of analog and digital pins that allow you to connect external components to the board. The board also includes a reset button and a power switch, allowing you to reset and power the board on and off.

The Arduino platform has a huge amount of flexibility and can be used to create a range of projects from simple to complex. For example, you can use the Arduino platform to create a basic home automation system that turns lights on and off, or you can use it to create a complex interactive art installation. You can also use the Arduino platform to create robots and other self-controlled devices.

The Arduino platform has grown to become an incredibly popular choice for makers, hobbyists, and professionals alike. It is incredibly easy to use, and the large community of users provides a wealth of tutorials and information. Additionally, the open-source nature of the platform makes it easy to customize and expand upon existing projects. It is a great platform for anyone looking to get started with physical computing projects.



## Arduinouno and electronics simulation

We can use several simulating programs to simulate robots. There are awesome platforms that allow simulations like: 3Dvisualizer or Webots ... But since our robot will be based on the Arduino Uno controller probably the best option is:

- [Thinkercad](https://www.tinkercad.com/dashboard)

You can sign in with your google account.

### Task: Basic Blink project

1. Try to do some basic project (e.g. Blink) to turn on and off an LED.
2. Try to add your own LED on the different output pin and change the program like is shown on the [@fig:blink_tc] to make it work (LED must blinking).

![Blink example in Thinkercad.](./slike/thinkercad_simulation_blink.png){#fig:blink_tc}

### Questions:

1. How can you control the output voltage potential?
2. In which direction will electric current flow?
3. What voltage is present on the resistor?
  + How can we determine the voltage on the resistor (describe 2 possibilities)?
4. What voltage is present on the LED?



## Software installation

We will need softwate listed bellow:

1. [Arduino IDE](#arduino-ide) is basics "development environment"
2. [RobDuino](#robduino) library for easier programming
3. [Ardublockly](#ardublockly) is needed for introduction to programming
  + **Python** is needed for running Ardublockly
4. [VSC in PlatformIO](#vsc-in-platformio) proper IDE include:
  + auto-completion,
  + error marking (e.g. forgotten \";\"),
  + auto-detect USB port, 
  + function information

### Arduino IDE

1. Go to Arduino web page Arduino->Software->[Download](https://www.arduino.cc/en/Main/Software).
2. Download [Arduino IDE 1.8.9](https://www.arduino.cc/en/Main/OldSoftwareReleases#previous) choose [Windows Install](https://www.arduino.cc/download_handler.php?f=/arduino-1.8.9-windows.exe)...
2. ... click `JUST DOWNLOAD`.
3. run `arduino-1.8.9.exe` and follow the instructions.
4. ... don't forget to install also 3rd party drivers (for Chinese version of Arduino UNO controller)... 
5. if you do forget... Try this [Russian drivers](https://www.5v.ru/zip/ch341ser(v34).zip) from [page](https://www.5v.ru/ch340g.htm).

#### Getting started

1. Run `Arduino IDE`
2. Connect Arduino Uno controller to USB port.\
    `Arduino Uno`
3. Open simple basic program:\
    `files` -> `examples` -> `01.basics` -> `blink`

```c++
void setup() {
  pinMode(LED_BUILTIN, OUTPUT);
}

void loop() {
  digitalWrite(LED_BUILTIN, HIGH);   // turn the LED on (HIGH is the voltage level)
  delay(1000);                       // wait for a second
  digitalWrite(LED_BUILTIN, LOW);    // turn the LED off by making the voltage LOW
  delay(1000);                       // wait for a second
}
```
4. Make this settings in `Tools` menu ->
    1. `Board:` Arduino/Genuino Uno
    2. `Port:` COM3 *or similar*

7. Run :\
    `Upload` to transfere the program to Arduino UNO controller.

8. If everything is OK you will get this message:

```
Done uploading.
Sketch uses 970 bytes (3%) of program storage space. Maximum is 32256 bytes.
Global variables use 9 bytes (0%) of dynamic memory, leaving 2039 bytes for local variables. Maximum is 2048 bytes.
```
9. Optional this preferences are suggested:  
`File` -> `Preferences`:
    1. `Editor Language`: English
    2. `Editor font size`: 20
    3. `Show verbose output during`: [ ]compiling [x] upload
    4. `[x] Display linenumbers`
    5. `[x] Enable code folding`

### RobDuino

RobDuino is Arduino library which include some usefull functions for driving motors and on-board key usage...

#### RobDuino Library Installation

1. Download zip file:
   * [RobDuino-master.zip](https://github.com/davidrihtarsic/RobDuino/archive/master.zip)
2. rename RobDuino-master.zip in:
   * **RobDuino.zip**
3. run Arduino IDE
4. choose:
   * `Sketch` --> `Include Library` --> `Add .ZIP Library...`
5. find
   * `.../Download/RobDuino.zip`
   * `[OK]`

### Ardublockly

[Ardublockly](https://ardublockly.embeddedlog.com/) is [graphical programming environment](https://en.wikipedia.org/wiki/Visual_programming_language) for programming Arduino controllers. A demo version of the program is also available [on-line](https://ardublockly.embeddedlog.com/demo/#).

Note: For actual programming you will need Arduino IDE installed.

Note: For running Ardublockly you will need to install Python program.

#### Python Installation

1. You will have to install [Python 3.7](https://www.python.org/) or grater. First [Download](https://www.python.org/downloads/) the newest version of Python.

2. Run installation file and set this settings:
    1. `[x] Add Python to PATH` in
    2. choose `Clasic Instalation`

#### Ardublockly Installation

3. From [github.com/.../ardublockly](https://github.com/carlosperate/ardublockly) download **zip** file by clicking **Clone or download** and choosen [Download ZIP file](https://github.com/carlosperate/ardublockly/archive/master.zip).

4. Extract `ardublockly-master.zip` to dirrectory of your choice e.g. `C:\\Program Files(x86)`

5. That is it! Installation is complete.

##### Running Ardublockly

6. Find this file `C:\\Program Files(x86)\\ardublockly-master` and double-click on `start.py`. Python program should run and you should see:
    1. terminal window with some code running...
    2. and a new window should apear in your Internet Browser.
If this is will not happend try to run `start.py` with right mouse button and `Start program with` then choose `Python 3.7`.

#### Settings

7. Click `menu` and choose `Settings`:
    1. `Compiler Location:` C:\\Program Files (x86)\\Arduino\\arduino_debug.exe
    2. `Arduino Board:` Uno
    3. `Com port:` COM3 *or appropriate one*
    4. Click `[RETURN]`.

### VSC in PlatformIO

Note: For programming Arduino controllers you will need Arduino IDE installed.

[Download](https://code.visualstudio.com/download) installation file:

1. run `VSCodeUserSetup-ia32-1.49.3.exe` installation file.
2. run VSC program and click `Extensions`
3. search for `PlatformIO IDE` and 
4. run `Install`.
5. restart VSC or click `Reload now`.

#### Getting Started

Write basic program `Blink`:

1. plug in Arduino Uno.
2. open `PlatformIO - Home Page`:
  - in left icon bar find `PlatformIO`
    + `QUICK ACCESS` -> `PIO Home` -> `Open`
3. choose `+ New Project`
4. Setup:
  - `Name:` ime_projekta
  - `Board:` Arduino UNO
  - `Framework:` Arduino Framework
5. click `Finish` 
6. Find directory `src` (e.g. `source code`), where you can find main program code in file `main.cpp`
7. Copy-Paste this example:
```cpp
#include <Arduino.h>
void setup() {
  pinMode(13, OUTPUT);
}

void loop() {
  digitalWrite(13,HIGH);
  delay(500);
  digitalWrite(13,LOW);
  delay(500);
}
```
8. Run `Build` and `Upload`.



 Starting with Arduino IDE
--------------------------------------------------------------------------------

The Arduino platform is based on the Atmel AVR microcontroller family, and the Arduino Uno is based on the ATmega328 microcontroller. The Arduino Integrated Development Environment (IDE) is a software application that provides a way to write and upload code to the microcontroller. The Arduino IDE is available for Windows, macOS, and Linux, and it is open source.

Happy programming!

### Board setup

1. Connect the Arduino Uno to PC with proper USB cable.  
    `[Arduino Uno]` 
2. Make shure that you will set the proper settings (see [@fig:Arduino_basic_setup_IDE]). From the menu choose:  
    `Tools`-
    1.  `Board:` Arduino/Genuino Uno
    2.  `Port:` COM3

    ![Arduino basic setup.](./slike/Arduino_basic_setup.png){#fig:Arduino_basic_setup_IDE}

3. Open Arduino IDE program and open program with:  
    `Files -  Examples - 01. Basics - Blink.ino`
4. To upload the code you can click the icon `Upload`.  
    If the uploading was successful you will be prompted with the text
    like:  

```
Done uploading.  
Sketch uses 970 bytes (3%) of program storage space. Maximum
is 32256 bytes. Global variables use 9 bytes (0%) of dynamic
memory, leaving 2039 bytes for local variables. Maximum is
2048 bytes.
```

### Issues

#### LED_BUILTIN was not declared in this scope

![Error image.](./slike/VAR_was_not_declared.png){#fig:VAR_was_not_declared_IDE}

Compiler ne ve kaj naj bi bilo "LED_BUILTIN" ... na tem mesu naj bi bila številka priključka, ki ga želimo krmiliti. V tem primeru je to številka 13. Rešitvi sta lahko 2:

  1. vse LED_BUILTIN zamenjaš s 13 ali  
  2. v vrstico pred "void setup()" dodaj `const int LED_BUILTIN = 13;`

Zadnja (druga) rešitev je boljša, ker pripomore k berljivosti programa... Spremenljivka LED_BUILTIN se imenuje "razlagalna spremenljivka" ker pomaga razlagati program. Tako postane tisti komentar "// turn the LED on (HIGH is the voltage level)" nepotreben, saj sama koda pove točno enako.


 

 Setting up an Arduino development environment
--------------------------------------------------------------------------------



## Equipment testing

### Basic testing in Arduino IDE

1. Connect the Arduino Uno to PC with proper USB cable.  
    `[Arduino Uno]` 
2. Open Arduino IDE program and open program with:  
    `Files -  Examples - 01. Basics - Blink.ino`
3. Make shure that you will set the proper settings (see [@fig:Arduino_basic_setup_IDE_2]). From the menu choose:  
    `Tools`-
    1.  `Board:` Arduino/Genuino Uno
    2.  `Port:` COM3

![Arduino basic setup.](./slike/Arduino_basic_setup.png){#fig:Arduino_basic_setup_IDE_2}

-   To upload the code you can click the icon `Upload`.  
    If the uploading was successful you will be prompted with the text
    like:  

```
Done uploading.  
Sketch uses 970 bytes (3%) of program storage space. Maximum
is 32256 bytes. Global variables use 9 bytes (0%) of dynamic
memory, leaving 2039 bytes for local variables. Maximum is
2048 bytes.
```

### Issues

#### LED_BUILTIN was not declared in this scope

![Error image.](./slike/VAR_was_not_declared.png){#fig:VAR_was_not_declared_IDE_2}

Compiler ne ve kaj naj bi bilo "LED_BUILTIN" ... na tem mesu naj bi bila številka priključka, ki ga želimo krmiliti. V tem primeru je to številka 13. Rešitvi sta lahko 2:  
1. vse LED_BUILTIN zamenjaš s 13 ali  
2. v vrstico pred "void setup()" dodaj `const int LED_BUILTIN = 13;`

Zadnja (druga) rešitev je boljša, ker pripomore k berljivosti programa... Spremenljivka LED_BUILTIN se imenuje "razlagalna spremenljivka" ker pomaga razlagati program. Tako postane tisti komentar "// turn the LED on (HIGH is the voltage level)" nepotreben, saj sama koda pove točno enako.

### Basic testing in Ardublockly

1. Connect the Arduino Uno to PC with proper USB cable.  
    `[Arduino Uno]` 
2. Run Ardublockly program. Which will be running as localhost and you will be using internet browser as IDE. The addres will be:  
    `http://localhost:8000/ardublockly/index.html`
3. In the left corner of the program you can find `[=] menu icon`. From where you can choose (Slide 2 and 3)  
    `[] Settings`:
    1.  `Compiler Location:` C:\\Program Files (x86)\\Arduino\\arduino\_debug.exe
    2.  `Arduino Board:` Uno
    3.  `Com port:` COM3
    4.  And press:`[ RETURN ]`
4. Finaly you can press button `PLAY` And if uploading was successful you will be prompted with the text (Slide 4):  


![Ardublockly basic setup.](./slike/Ardublockly_basic_setup.png){#fig:Ardublockly_basic_setup}

```
Successfully Uploaded Sketch
WARNING: Error loading hardware folder /home/david/Arduino/hardware/WAV8F.
No valid hardware definitions found in folder WAV8F.
Sketch uses 444 bytes (1%) of program storage space. Maximum is
32256 bytes. Global variables use 9 bytes (0%) of dynamic memory,
leaving 2039 bytes for local variables. Maximum is 2048 bytes.
```

### Summary
Before uploading the programming code always check that the right board and serial port are set.

### Issues
**Ardublockly returns the Error id 55: Serial port Serial Port unavailable.**  
Try to re-connect the Arduino board. Wait a moment, check the settings and choose the COM port again then try again.


### RobDuino module

1. Na krmilnik Arduino Uno priključite modul `RobDuino` in naložite naslednji program:


```cpp
bool test_tipk = 1;
int l=1;

void setup() {
  for (int i = 0; i < 8; i++){
    pinMode(i, OUTPUT);
  }
  pinMode(A4, INPUT_PULLUP);
  pinMode(A5, INPUT_PULLUP);
  PORTD=1;
}

void loop() {
  char tipka_a4_is_pressed = !digitalRead(A4); 
  char tipka_a5_is_pressed = !digitalRead(A5); 
  if (tipka_a4_is_pressed) l = l >> 1;
  if (tipka_a5_is_pressed) l = l << 1;
  if (tipka_a4_is_pressed && tipka_a5_is_pressed) test_tipk = !test_tipk;
  if (test_tipk){
    if (l < 1) l = 128;
    if (l > 255) l = 1;
    PORTD = l; 
  }else{
    PORTD = analogRead(A0) >> 2;
  }
  delay(200);
}
```
: Equipment testing. {#lst:026_Equipment_testing}

2. Nato preverite delovanje obeh tipk (A4 in A5) na modulu in vrednosti izhodnih priključkov D0 .. D7.

### Napajalni modul

Napajalni modul uporablja 2x Li-ion akumulatorja tipa 18650. Spodnje tiskano vezje je prikazano [@fig:napajalni_modul].

![Napajalni modul.](./slike/napajalni_modul.jpg){#fig:napajalni_modul width=8cm}

Dodatno smo ga opremili z:

1. 2.5mm jack priključkom za napajanje,
2. 3-pinskim priključkom za napajanje,
3. preklopnim stikalom za izbiranje načina delovanja:
    1. ON - izhod za 9V je kaktiviran
    2. OFF - izključen izhod 9V napajanja in omogočeno je polnenje akumulatorjev preko 3-pinskega priključka (5V).

Pomembno: Pred prvo uporabo moramo ročno aktivirati napajalni modul tako, da povežemo GND na 3-pinskem priključku in NEGATIVNI terminal akumulatorjev.

### Tipka

1. Priključite stikalo po shemi na [@fig:tipka_test].

![Priključitev tipke.](./slike/RobDuino_FT_key.png){#fig:tipka_test}

2. Nato naložite naslednji program.

```cpp
void setup() {
    pinMode(A0, INPUT);
    pinMode(7, OUTPUT);
}

void loop() {
    char key_a0_is_pressed = digitalRead(A0);
    if (key_a0_is_pressed){
        digitalWrite(7, HIGH);
    } else{
        digitalWrite(7, LOW);
    }
    delay(100);
}
```

### Svetlobni senzor

1. Priključite foto-tranzistor v delilnik napetosti z uporom, kot prikazuje [@fig:foto_senzor_test].

![Priključitev foto-tranzistorja kot svetlobni senzor.](./slike/Svetlobni_senzor.png){#fig:foto_senzor_test}

2. Nato naložite naslednji program in preverite odziv svetlobnega senzorja.

```cpp
 void setup() {
  pinMode(A1, INPUT);
  Serial.begin(9600);
}

void loop() {
  int light_senzor_value = analogRead(A1);
  Serial.println(light_senzor_value);
  delay(100);
}
```

3. Odziv senzorja spremljajte v oknu serijske komunikacije.

### IR senzor razdalje

1. IR senzor razdalje priključite na tri-pinski priključek kot je prikazano na [@fig:test_IR].

![Priključitev IR senzorja razdalje.](./slike/IR_senzor.png){#fig:test_IR}

2. Delovanje senzorja preskusite z naslednjim programom, njegov odziv pa spremljajte v oknu za serijsko komunikacijo.

```cpp
void setup() {
  pinMode(A0, INPUT);
  Serial.begin(9600);
}

void loop() {
  int distance_senzor_value = analogRead(A0);
  Serial.println(distance_senzor_value);
  delay(100);
}
```

### LCD (I2C)

1. Priključite LCD na I2C vodilo kot prikazuje 

![Povezava LCD na I2C vodilo krmilnika.](./slike/I2C_LCD.png){#fig:test_I2C_LCD_2}

2. Priskrbite si knjižnico `LiquidCristal-I2C` iz naslova:  
https://www.arduino.cc/reference/en/libraries/liquidcrystal-i2c/ 
3. Knjižnico dodajte v Arduino IDE okolje tako, da dodate `ZIP` datoteko v :  
`Sketch >> Include Library >> Add .ZIP Library`
3. V VSC in PlatformIO vtičniku si lahko knjižnico naložite tako, da v terminalno okno vpišete ukaz  
`pio lib install "marcoschwartz/LiquidCrystal_I2C@^1.1.4"`

4. Nato preskusite naslednji program:

```cpp
#include <Wire.h> 
#include <LiquidCrystal_I2C.h>
LiquidCrystal_I2C Lcd(0x27, 16, 2);

void setup() {   
    Lcd.init();
    
    Lcd.clear();
    Lcd.backlight();
    
    Lcd.setCursor(3,0);
    Lcd.print("Hello");
    Lcd.setCursor(6,1);
    Lcd.print("World");   
}

void loop() {
}
```

Če niste prepričani kateri i2c naslov uporablja naprava na LCD-ju le tega lahko preverite s programom `I2C scanner` (https://playground.arduino.cc/Main/I2cScanner/). Običajno I2C LCD-ji, ki jih naredijo kitajski proizvajalci uporabljajo I2C naslov `0x27` , `0x3F` ali manj pogosto `0x38`.




 Programming Arduino UNO using C++
--------------------------------------------------------------------------------

C++ is a powerful and efficient programming language widely used for embedded systems, including Arduino. It provides low-level control over hardware while still offering high-level abstractions, making it a great choice for programming microcontrollers like ATmega328.

One of the key reasons C++ is appropriate for hardware communication is its ability to manage memory efficiently and interact directly with registers and peripherals. Features like direct memory access, bitwise operations, and object-oriented programming allow developers to write both high-performance and modular code.

As Linus Torvalds, the creator of Linux, famously said:

> C++ is a horrible language. It’s made more horrible by the fact that a lot of substandard programmers use it..."

While Torvalds is critical of C++ in system programming and prefers using C, in embedded development, its mix of low-level access and high-level structure makes it an ideal choice for Arduino projects especially for starters.




## Hello world in Arduino IDE

### Task: Programming the microcontroller

1. Make a very simple program like setting the digital output bit D3 to logical state 1 or **HIGH**.

```cpp
void setup() {
  // put your setup code here, to run once:
  pinMode(3, OUTPUT);
  digitalWrite(3, HIGH);
}

void loop() {
  // put your main code here, to run repeatedly:

}
```
: Hello World in ArduinoIDE. {#lst:170_Hello_World_in_ArduinoIDE}

2. Send the program t o controller Arduino UNO .

### Questions:

1.  Explain the purpose of next programming characters in presented example:
    1. `;`
    2. `{  }`
    3.  `pinMode(3, OUTPUT);`
    4.  `digitalWrite(3, HIGH);`
    3.  `// put your ...`
    5.  `void setup()`
    6.  `void loop()`

### Summary:

#### Using curly braces - \{ and \}

Using curly braces in C++ is important part of writing the programming code. Imagine that you want to merge several members of programming code to a single pile. As we would separate pencils into one pile and markers to another - to be more organized. In real life we would do by elastic bundle or rope. If you have to choose single character from the keyboard to indicate that several members are combined to the same pile - which character would you choose? Probably curly braces {} are the best choice.

#### Function Name

Function name should be stacked together from 2 - 5 short words that uniquely describing the functionality of the function. The first word should start with lower case and all the others words following should start with upper case. Some examples should be:

```cpp
badname(); 
goodFunctionName(); 
```

#### Function Declaration

```cpp
int measre_Temperature_Avg(int temperatureSensor);
```

#### Function Definition

```cpp
void loop() {
    //some programming
    //code goes here...
}
```

#### Function Call

```cpp
    digitalWrite(3, HIGH);
```

### Issues:

#### *Error: expected ';' before 'something'*

Probably you forgot to put ; (semicolon) at the end of the command. Find the row starting with \"**something**\" and look the row above\...  probably missing \"**;**\".  

#### *Light at the digital output D3 is not ON.*

Check if the enable switch fot the digital outputs is at the right position (ENABLE).


 

 Communicating with sensors and actuators
--------------------------------------------------------------------------------


